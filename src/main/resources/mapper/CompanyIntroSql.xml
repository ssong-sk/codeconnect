<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.code.mapper.CompanyIntroMapperInter">
    <insert id="insertCompanyIntro" parameterType="CompanyIntroDto">
        insert into company_intro
        (c_num,ci_logo, ci_image,ci_link,ci_soge, ci_writeday)
        values
        (#{c_num}, #{ci_logo}, #{ci_image}, #{ci_link}, #{ci_soge},now())
    </insert>
    
    <!-- 기업 회원 정보 + 기업 소개문 전부 가져오기 : join -->
    <select id="getAllCompanyIntros" resultType="CompanyIntroDto">
    SELECT ci.*, c.*
    FROM company_intro ci
    JOIN company c ON ci.c_num = c.c_num
    ORDER BY ci.ci_num
</select>

   
    <select id="getDataByNum" parameterType="String" resultType="CompanyIntroDto">
        select * from company_intro where c_num=#{c_num}
    </select>

    <update id="updateCompanyIntro" parameterType="CompanyIntroDto">
        update company_intro set

        ci_logo=#{ci_logo},
        ci_image=#{ci_image},
        ci_link=#{ci_link},
        ci_soge=#{ci_soge}
        where c_num=#{c_num}
    </update>
    
    
    <select id="countCompanyIntro" parameterType="String" resultType="int" >
    	select count(*) from company_intro where c_num=#{c_num}
    
    </select>
    
    
    <select id="showOneCompanyIntro">
	    select 
	        ci.*, 
	        c.c_id, 
	        c.c_pass, 
	        c.c_name, 
	        c.c_reginum, 
	        c.c_local, 
	        c.c_category, 
	        c.c_peoplesu, 
	        c.c_insa_email, 
	        c.c_insa_phone, 
	        c.c_addr, 
	        c.c_money, 
	        c.c_birthyear, 
	        c.c_regi_file, 
	        c.c_salary, 
	        c.c_gaipday, 
	        c.c_phone, 
	        c.c_updateday
	    from 
	        company_intro ci
	    join 
	        company c
	    on 
	        ci.c_num = c.c_num
	    where 
	        ci.c_num = #{c_num}
	</select>



    <!-- 채용공고에서 사용 -->
    <select id="selectCi_num" parameterType="int" resultType="int">
    	select ci_num from company_intro where c_num = #{c_num}
    </select>
    

</mapper>

